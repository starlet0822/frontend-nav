import{a as D,v as E,e as m,l as Q,o as B,I as L,c as u,m as g,r as n,T as M,b0 as U,K as z,U as K,aj as W,h as _,j as x,i as q}from"./index-3f19f602.js";import{Q as G}from"./question-filled-00b6e9f5.js";import{_ as H}from"./plugin-vueexport-helper-c27b6911.js";function J(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Object]"&&!q(l)}const X={"el-select":"el-option","el-radio-group":"el-radio","el-checkbox-group":"el-checkbox"},Y=["el-checkbox-group"],Z=D({name:"ProForm",inheritAttrs:!1,components:{QuestionFilled:G},emits:["update:modelValue","update:api","change","submit","reset"],props:{api:{type:Object,default:()=>({})},modelValue:{type:Object,default:()=>({})},formOptions:{type:Object,default:()=>({})},rowOptions:{type:Object,default:()=>({})},colCount:{type:[Number,String],default:1,validator:l=>[1,2,3,4,6,8,12,24].includes(+l)},isQuery:{type:Boolean,default:!1},expand:{type:Boolean,default:!1},showActions:Boolean,formItems:{type:Array,default:()=>[]}},setup(l,{emit:c,slots:r}){const O=M(),C=E(()=>Object.keys(l.formItems).length>0),b=Object.assign({labelPosition:"right",labelWidth:"120px",disabled:!1,size:void 0,"scroll-to-error":!0},l.formOptions),V={gutter:16,type:"flex",align:"middle",...l.rowOptions},y=e=>{const a={},o=t=>{let d="";return U(t.value)?Y.includes(t.type)?d=[]:d="":d=t.value,d};return l.formItems.forEach(t=>{t.prop&&(a[t.prop]=o(t))}),{...a,...l.modelValue}},i=m(),j=m({}),s=m(y()),F=e=>e?X[e]:!1;Q(()=>s,e=>{c("update:modelValue",e)},{deep:!0,immediate:!1}),B(()=>{k(),c("update:modelValue",s.value)});const k=async()=>{await L();const e={...i.value,...O,initFormModel:y};c("update:api",e)},I=async()=>{var e;await((e=i.value)==null?void 0:e.validate((a,o)=>{c("submit",{valid:a,fields:o,form:s.value,api:l.api})}))},P=()=>{var e;(e=i.value)==null||e.resetFields(),c("reset")},A=e=>{const a={};return e.labelRender&&(a.label=o=>S(o,e)),a},S=(e,a)=>a.labelRender(e),w=(e,a)=>{s.value[a]=e,c("change",{value:e,props:l}),c("update:modelValue",s.value)},T=e=>{let a;const o=["el-input","el-textarea","el-input-number","el-autocomplete"],t=["el-select","el-select-v2","el-tree-select","el-cascader","el-time-select","el-date-picker"];return o.includes(e.type)?a="请输入"+e.label:t.includes(e.type)?a="请选择"+e.label:a="请填写"+e.label,a},N=e=>{const a=e.attrs??{};return{placeholder:T(e),...a}},R=()=>{const e=l.formItems.length;return+l.colCount>e?24/(e<4?4:e):24/+l.colCount};return()=>{let e;return C.value&&u(n("el-form"),g({ref:i,class:"proForm",model:s.value,rules:j.value},b),{default:()=>{var a,o;return[b.inline?u(z,null,null):u(n("el-row"),V,J(e=l.formItems.map((t,d)=>{var v;return K(u(n("el-col"),g({key:t.prop},{...t.col,span:((v=t.col)==null?void 0:v.span)??R()}),{default:()=>[u(n("el-form-item"),t,{default:()=>{var h;return[t.type==="el-text"?u(n("el-text"),t.attrs,{default:()=>[t.value]}):t.type==="slot"?(h=r[t.slotName])==null?void 0:h.call(r,t||{}):_(n(t.type),{...N(t),modelValue:s.value[t.prop],"onUpdate:modelValue":f=>w(f,t.prop)},t.options?()=>{var f;return(f=t.options)==null?void 0:f.map(p=>_(n(p.optionsType||F(t.type)),{...p,key:t.label},{default:()=>p.text}))}:null)]},...A(t)})]}),[[W,l.isQuery?l.expand||d<l.colCount:!0]])}))?e:{default:()=>[e]}),(a=r.actions)!=null&&a.call(r)?(o=r.actions)==null?void 0:o.call(r,{form:s.value}):l.showActions?u(n("el-form-item"),null,{default:()=>[u(n("el-button"),{type:"primary",onClick:I},{default:()=>[x("提 交")]}),u(n("el-button"),{onClick:P},{default:()=>[x("重 置")]})]}):null]}})}}});const le=H(Z,[["__scopeId","data-v-12516bd6"]]);export{le as P};
