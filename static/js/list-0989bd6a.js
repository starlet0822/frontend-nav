import{Q as F}from"./index-5868baab.js";import{P as N,g as $,a as q}from"./constants-056111e1.js";import{d as A}from"./default-2af36baf.js";import{o as G}from"./omit-afb13dd6.js";import{s as H}from"./shuffle-cd167938.js";import{d as M,a as I,r as k,n as B,b as n,X as U,j as u,f as s,w as m,e as c,h as a,R as W,G as X,H as J,u as C,v as O,g as K,c as T,B as P,z as Y,A as Z,_ as ee}from"./index-8b05b7ac.js";import"./index-9bee6fad.js";import"./question-filled-00b6e9f5.js";const te=(e="el-option",p={})=>{const f=[];return Object.keys(p).forEach((o,l)=>{const t={optionsType:e,prop:`${e.replace("el-","")}${l+1}`,text:p[o]};["el-radio","el-radio-button","el-checkbox"].includes(e)&&(t.label=o),["el-option"].includes(e)&&(t.value=o,t.label=p[o]),f.push(t)}),f},j=e=>(Y("data-v-28190bfc"),e=e(),Z(),e),le={class:"list-wrapper overflow-auto",style:{height:"500px"}},se=["infinite-scroll-disabled"],ae={class:"flex items-start"},oe={class:"name flex-1"},ne={key:1,class:"el-loading-spinner flex-center",style:{position:"unset","margin-top":"10px"}},ce=j(()=>a("svg",{class:"circular",viewBox:"0 0 50 50"},[a("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})],-1)),ie=j(()=>a("div",{class:"text-gray-400"},"loading...",-1)),re=[ce,ie],ue={key:2,class:"mt-2 text-sm text-gray-400 text-center"},pe=M({name:"InfiniteScrollList",__name:"list",setup(e){const p={labelPosition:"right",labelWidth:"80px",labelSuffix:":"},f=[{type:"el-input",prop:"name",label:"名称",value:"",attrs:{clearable:!0},col:{xs:24,sm:24,md:12,lg:8,xl:6}},{type:"el-select",prop:"type",label:"类型",value:"",attrs:{class:"w-full"},options:te("el-option",N),col:{xs:24,sm:24,md:12,lg:8,xl:6}}],o=I([]),l=I([]),t=k({}),d=k({pageNo:1,pageSize:20,total:0}),i=I(!1),x=B(()=>o.value.length>=d.total),z=B(()=>i.value||x.value),S=()=>{V()},L=v=>{Object.assign(t,v),d.pageNo=1,l.value=[],S()},V=async()=>{try{i.value=!0;const v=G({...d,...t},["total"]),{success:g,data:{rows:h,total:y}={}}=await $(v);if(g){d.total=y??0,x.value||(d.pageNo+=1);let _=[];Object.values(q).forEach(b=>{_=_.concat(h.filter(w=>w.type===b))}),l.value=l.value.concat(H(_)),o.value=l.value}}finally{i.value=!1}};return V(),(v,g)=>{const h=n("el-card"),y=n("el-avatar"),_=n("el-tag"),b=n("el-statistic"),w=n("el-empty"),D=n("el-col"),E=n("el-row"),Q=U("infinite-scroll");return c(),u("div",null,[s(h,{shadow:"never"},{default:m(()=>[s(F,{modelValue:t,"onUpdate:modelValue":g[0]||(g[0]=r=>t=r),formItems:f,formOptions:p,colCount:"4",isQuery:"",onSearch:L},null,8,["modelValue"])]),_:1}),s(h,{shadow:"never"},{default:m(()=>[s(E,null,{default:m(()=>[s(D,{span:24},{default:m(()=>[a("div",le,[W((c(),u("ul",{"infinite-scroll-disabled":z.value},[(c(!0),u(X,null,J(l.value,(r,R)=>(c(),u("li",{key:r.name+R,class:"list-item p-5 el-border"},[a("div",ae,[a("div",null,[s(y,{shape:"square",size:"large",src:C(A),style:{width:"50px",height:"50px",opacity:.5,marginRight:"16px"}},null,8,["src"])]),a("div",oe,[a("p",null,O(r.name),1),s(_,null,{default:m(()=>[K(O(C(N)[r.type]),1)]),_:2},1024)]),s(b,{title:"权重",value:r.priority},null,8,["value"])])]))),128))],8,se)),[[Q,S]]),!i.value&&!l.value.length?(c(),T(w,{key:0,"image-size":200})):P("",!0),i.value?(c(),u("div",ne,re)):P("",!0),!i.value&&x.value?(c(),u("p",ue," 没有更多了~ ")):P("",!0)])]),_:1})]),_:1})]),_:1})])}}});const ye=ee(pe,[["__scopeId","data-v-28190bfc"]]);export{ye as default};
