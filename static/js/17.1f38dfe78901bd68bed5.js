webpackJsonp([17],{ChoQ:function(e,t){},WOmT:function(e,t){},tCvD:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i("0xDb"),n={name:"UploadFile",props:{action:{type:String,default:"https://jsonplaceholder.typicode.com/posts/"},compressQuality:{default:.6,type:Number},uploadText:{default:"点击上传",type:String},drag:{type:Boolean,default:!1},sizeLimit:{default:100,type:Number},showTip:{type:Boolean,default:!0},imageCompress:{default:!0,type:Boolean},beforeUpload:{type:Function,default:null},onExceed:{type:Function,default:null}},data:function(){return{}},computed:{fileTypes:function(){return this.$attrs.accept.replace(/\./g,"").split(",")},fileTypeText:function(){return"支持格式："+this.fileTypes.join("、")},fileSizeText:function(){return"单个文件大小限制："+this.sizeLimit+"MB"},fileUploadTip:function(){return this.fileTypeText+"，"+this.fileSizeText}},created:function(){},methods:{handleOnExceed:function(e,t){this.onExceed?this.onExceed():this.$attrs.limit&&this.$message.warning("最多上传"+this.$attrs.limit+"个文件")},handleBeforeUpload:function(e){if(this.fileTypes.length&&!this.fileTypes.includes(Object(l.k)(e.name)))return this.$message.error(this.fileTypeText),!1;if(e.size>1024*this.sizeLimit*1024)return this.$message.error(this.fileSizeText),!1;var t=/\.(gif|jpg|jpeg|png|GIF|JPG|JPEG|PNG)$/.test(e.name);return!(!this.imageCompress||!t)||(!this.beforeUpload||this.beforeUpload(e))}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dg-upload"},[i("el-upload",e._b({ref:"DgUpload",attrs:{action:e.action,drag:e.drag,"before-upload":e.handleBeforeUpload,"on-exceed":e.handleOnExceed},scopedSlots:e._u([{key:"file",fn:function(t){return[e._t("file",null,null,t)]}},{key:"trigger",fn:function(){return[e._t("trigger")]},proxy:!0}],null,!0)},"el-upload",e.$attrs,!1),[e._t("default",function(){return[e.drag?e._e():i("el-button",[e._v(e._s(e.uploadText))]),e._v(" "),e.drag?i("div",[i("i",{staticClass:"el-icon-upload"}),e._v(" "),i("div",{staticClass:"el-upload__text"},[e._v("\n          将文件拖到此处，或\n          "),i("em",[e._v("点击上传")])])]):e._e()]}),e._v(" "),e._v(" "),e._v(" "),e.showTip?i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[i("span",[e._v("\n        "+e._s(e.fileUploadTip)+"\n      ")])]):e._e()],2)],1)},staticRenderFns:[]};var a=i("VU/8")(n,s,!1,function(e){i("ChoQ")},"data-v-3e0f9d1d",null).exports,o=i("cFYx"),r={props:{file:{type:Object,required:!0},props:{type:Object,default:function(){return{}}},active:Boolean,onDelete:Function,deletable:{type:Boolean,default:!0},downloadable:{type:Boolean,default:!0},previewable:{type:Boolean,default:!0}},data:function(){return{fileProps:{id:"id",name:"name",url:"url"},fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/8/27/f01c15bb73e1ef3793e64e6b7bbccjpeg.jpeg"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}]}},filters:{filterFileSize:l.f},created:function(){for(var e in this.props)Object.hasOwn(this.fileProps,e)&&(this.fileProps[e]=this.props[e])},methods:{parsePercentage:function(e){return parseInt(e,10)},getFileIconWithSuffix:function(e){var t=Object(l.k)(e);return Object(l.j)(t)},previewFile:function(e){var t=Object(l.k)(e.name);["jpg","jpeg","png"].indexOf(t)>-1&&o.a.openImageViewr({urlList:[e.url]})},clickFile:function(e){this.$emit("click",e)},downloadFile:function(e){var t=this;Object(l.d)(e.url,e.name,function(i){t.$set(e,"downloadPercentage",i)})},onDeleteFile:function(e){var t=this;this.deletable&&this.$confirm("确定删除文件【"+e.name+"】 吗？","提示").then(function(){t.deleteFile(t.file)})},deleteFile:function(e){this.onDelete&&this.onDelete(e),this.$emit("delete",e)}}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["file-item",""+e.file.status],on:{click:function(t){return e.clickFile(e.file)}}},[i("div",{staticClass:"file-icon"},[i("img",{attrs:{src:e.getFileIconWithSuffix(e.file.name),alt:""}})]),e._v(" "),i("div",{staticClass:"file-item__info"},[i("div",{staticClass:"file-item__info-text"},[i("span",{staticClass:"file-name",attrs:{title:e.file.name}},[e._v(e._s(e.file.name))]),e._v(" "),e.file.size?i("span",{staticClass:"file-size"},[e._v(e._s(e._f("filterFileSize")(e.file.size)))]):e._e()]),e._v(" "),"uploading"==e.file.status?i("el-progress",{attrs:{"stroke-width":3,percentage:e.parsePercentage(e.file.percentage)}}):e._e()],1),e._v(" "),i("div",{staticClass:"file-action"},["success"==e.file.status&&e.previewable?i("i",{staticClass:"el-icon-view",attrs:{title:"预览文件"},on:{click:function(t){return t.stopPropagation(),e.previewFile(e.file)}}}):e._e(),e._v(" "),"success"==e.file.status&&e.downloadable?i("i",{staticClass:"el-icon-download",attrs:{title:"下载"},on:{click:function(t){return t.stopPropagation(),e.downloadFile(e.file)}}}):e._e(),e._v(" "),"success"==e.file.status&&e.deletable?i("i",{staticClass:"el-icon-delete",attrs:{slot:"reference",title:"删除"},on:{click:function(t){return t.stopPropagation(),e.onDeleteFile(e.file)}},slot:"reference"}):e._e(),e._v(" "),e.file.downloadPercentage&&100!==e.file.downloadPercentage?i("el-progress",{staticClass:"download-progress",attrs:{title:"下载进度",type:"circle","stroke-width":3,width:16,"show-text":!1,percentage:e.parsePercentage(e.file.downloadPercentage)}}):e._e()],1)])},staticRenderFns:[]};var f={components:{uploadFile:a,FileItem:i("VU/8")(r,c,!1,function(e){i("zRsA")},"data-v-78ca908a",null).exports},props:{},data:function(){return{accept:".jpg,.png,.jpeg,.doc,.docx,.xls,.xlsx,.pdf,.ppt,.pppx",fileList:[{status:"success",name:"food.jpeg",url:"https://fuss10.elemecdn.com/8/27/f01c15bb73e1ef3793e64e6b7bbccjpeg.jpeg"},{status:"success",name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}]}},methods:{onSuccess:function(e,t,i){this.fileList=i},handleDeleteFile:function(e){var t=this.fileList.findIndex(function(t){return t.uid===e.uid});t>-1&&this.fileList.splice(t,1)}}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"content-layout-wrap"},[i("el-card",[i("div",{attrs:{slot:"header"},slot:"header"},[e._v("上传文件")]),e._v(" "),i("div",{staticClass:"wrapper"},[i("uploadFile",{attrs:{multiple:"","show-file-list":!0,"file-list":e.fileList,accept:e.accept,"on-success":e.onSuccess},scopedSlots:e._u([{key:"file",fn:function(t){var l=t.file;return[i("FileItem",{attrs:{file:l},on:{delete:e.handleDeleteFile}})]}}])})],1)])],1)},staticRenderFns:[]};var d=i("VU/8")(f,u,!1,function(e){i("WOmT")},"data-v-b667c11c",null);t.default=d.exports},zRsA:function(e,t){}});