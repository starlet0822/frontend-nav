webpackJsonp([23],{"+sE+":function(e,t){},J4rX:function(e,t){},Ub25:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("GF3t"),i=a("fZjL"),n=a.n(i),o=a("iq2N"),r=a("DQwu"),c=a("EHSG"),s=a("5PZE"),u=a("Kq5H"),d={name:"CertificateList",mixins:[s.a],components:{TableTopBar:o.a,TablePage:r.a},data:function(){return{moduleName:"edit-row-list",certCateArr:c.a,certTypeArr:c.c,certCateObj:c.b,certTypeObj:c.d,validityArr:c.f,validityObj:c.g,searchKeyList:[{key:"name",label:"证书名称",master:!0}],columns:[{label:"证书名称",prop:"name",editable:!0,columnProps:{showOverflowTooltip:!1}},{label:"证书分类",prop:"certCateName",editable:!0,columnProps:{minWidth:80,showOverflowTooltip:!1}},{label:"证书类型",prop:"certTypeName",editable:!0,columnProps:{minWidth:80,showOverflowTooltip:!1}},{label:"有效期",prop:"validityName",editable:!0,columnProps:{minWidth:80,showOverflowTooltip:!1}},{label:"操作",prop:"operation",customRender:!0,columnProps:{width:200,align:"center"}}],defaultCheckedRows:[],pageSize:20,dataKeys:[]}},created:function(){},methods:{getList:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.tableLoading=t;var a=this.getRequestParams("page","limit");Object(u.c)(a).then(function(t){e.tableData=t.data.rows||[],e.total=t.data.total||0,e.tableData.length&&(e.dataKeys=n()(e.tableData[0])),e.tableData.forEach(function(t){e.$set(t,"editable",!1),e.dataKeys.forEach(function(e){t["origin_"+e]=t[e]}),t.certCateName=c.b[t.certCate].label,t.certTypeName=c.d[t.certType].label,t.validityName=c.g[t.validity].label})}).finally(function(){setTimeout(function(){e.tableLoading=!1},1e3)})},onClickRow:function(e,t){switch(e){case"edit":t.editable=!0;break;case"confirm":t.editable=!1,this.dataKeys.forEach(function(e){t["origin_"+e]=t[e]});break;case"cancel":t.editable=!1,this.dataKeys.forEach(function(e){t[e]=t["origin_"+e]})}}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("TableTopBar",{attrs:{moduleName:e.moduleName,tableTitle:e.tableTitle,columns:e.columns,searchKeyList:e.searchKeyList,selectItem:e.selectItem},on:{search:e.onSearch,refresh:e.onRefreshList},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.size,i=t.dynamicColumns;return[a("TablePage",{ref:"tablePage",attrs:{slot:"content",moduleName:e.moduleName,loading:e.tableLoading,data:e.tableData,columns:i,size:l,height:e.height,selectItem:e.selectItem,defaultCheckedRows:e.defaultCheckedRows,pagination:e.paginationProps},on:{"on-select":e.handleSelect,pagination:e.handlePaginationChange},slot:"content",scopedSlots:e._u([{key:"cell-name",fn:function(t){var i=t.row;return[i.editable?[a("el-input",{directives:[{name:"input-tooltip",rawName:"v-input-tooltip"}],attrs:{size:l,clearable:!1,placeholder:"请输入"},model:{value:i.name,callback:function(t){e.$set(i,"name","string"==typeof t?t.trim():t)},expression:"row.name"}})]:a("span",{directives:[{name:"overflow-tooltip",rawName:"v-overflow-tooltip"}],staticClass:"stl-ellipsis"},[e._v(e._s(i.name||"-"))])]}},{key:"cell-certCateName",fn:function(t){var i=t.row;return[i.editable?a("el-select",{directives:[{name:"input-tooltip",rawName:"v-input-tooltip"}],staticStyle:{width:"100%"},attrs:{size:l,clearable:!1,filterable:!1},model:{value:i.certCate,callback:function(t){e.$set(i,"certCate",t)},expression:"row.certCate"}},e._l(e.certCateArr,function(e){var t=e.value,l=e.label;return a("el-option",{key:l+t,attrs:{label:l,value:+t}})}),1):a("span",{directives:[{name:"overflow-tooltip",rawName:"v-overflow-tooltip"}],staticClass:"stl-ellipsis"},[e._v("\n          "+e._s(e.certCateObj[i.certCate]&&e.certCateObj[i.certCate].label||"-")+"\n        ")])]}},{key:"cell-certTypeName",fn:function(t){var i=t.row;return[i.editable?a("el-select",{directives:[{name:"input-tooltip",rawName:"v-input-tooltip"}],staticStyle:{width:"100%"},attrs:{size:l,clearable:!1,filterable:!1},model:{value:i.certType,callback:function(t){e.$set(i,"certType",t)},expression:"row.certType"}},e._l(e.certTypeArr,function(e){var t=e.value,l=e.label;return a("el-option",{key:l+t,attrs:{label:l,value:+t}})}),1):a("span",{directives:[{name:"overflow-tooltip",rawName:"v-overflow-tooltip"}],staticClass:"stl-ellipsis"},[e._v("\n          "+e._s(e.certTypeObj[i.certType]&&e.certTypeObj[i.certType].label||"-")+"\n        ")])]}},{key:"cell-validityName",fn:function(t){var i=t.row;return[i.editable?a("el-select",{directives:[{name:"input-tooltip",rawName:"v-input-tooltip"}],staticStyle:{width:"100%"},attrs:{size:l,clearable:!1,filterable:!1},model:{value:i.validity,callback:function(t){e.$set(i,"validity",t)},expression:"row.validity"}},e._l(e.validityArr,function(e){var t=e.value,l=e.label;return a("el-option",{key:l+t,attrs:{label:l,value:+t}})}),1):[a("el-badge",{attrs:{"is-dot":"",type:e.validityObj[i.validity].type}}),e._v(" "),a("span",{directives:[{name:"overflow-tooltip",rawName:"v-overflow-tooltip"}],staticClass:"stl-ellipsis"},[e._v("\n            "+e._s(e.validityObj[i.validity]&&e.validityObj[i.validity].label||"-")+"\n          ")])]]}},{key:"column-operation",fn:function(t){return[a("el-table-column",e._b({attrs:{prop:"operation",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[a("el-button-group",{staticClass:"text-buttons-with-divider"},[l.editable?e._e():a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.onClickRow("edit",l)}}},[e._v("\n                编辑\n              ")]),e._v(" "),l.editable?[a("el-button",{attrs:{type:"text",icon:"el-icon-check"},on:{click:function(t){return e.onClickRow("confirm",l)}}},[e._v("\n                  保存\n                ")]),e._v(" "),a("el-button",{attrs:{type:"text",icon:"el-icon-close"},on:{click:function(t){return e.onClickRow("cancel",l)}}},[e._v("\n                  取消\n                ")])]:e._e()],2)]}}],null,!0)},"el-table-column",t,!1))]}}],null,!0)})]}}])})},staticRenderFns:[]};var b=a("VU/8")(d,p,!1,function(e){a("J4rX")},"data-v-bb617ed2",null).exports,v={name:"edit-row-list",components:{ContentHeader:l.a,TableList:b},data:function(){return{defaultCheckedRows:[]}}},f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"content-layout-wrap is-table"},[t("ContentHeader",{attrs:{backIcon:""}}),this._v(" "),t("TableList")],1)},staticRenderFns:[]};var m=a("VU/8")(v,f,!1,function(e){a("+sE+")},"data-v-f0771758",null);t.default=m.exports}});