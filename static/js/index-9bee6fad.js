import{d as N,n as Q,a as m,i as D,o as B,E as L,f as u,m as g,b as n,Q as M,aZ as U,G as z,R as G,ah as W,T as _,g as x,O as Z,_ as q}from"./index-8b05b7ac.js";import{Q as H}from"./question-filled-00b6e9f5.js";function J(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Object]"&&!Z(l)}const K={"el-select":"el-option","el-radio-group":"el-radio","el-checkbox-group":"el-checkbox"},X=["el-checkbox-group"],Y=N({name:"ProForm",inheritAttrs:!1,components:{QuestionFilled:H},emits:["update:modelValue","update:api","change","submit","reset"],props:{api:{type:Object,default:()=>({})},modelValue:{type:Object,default:()=>({})},formOptions:{type:Object,default:()=>({})},rowOptions:{type:Object,default:()=>({})},colCount:{type:[Number,String],default:1,validator:l=>[1,2,3,4,6,8,12,24].includes(+l)},isQuery:{type:Boolean,default:!1},expand:{type:Boolean,default:!1},showActions:Boolean,formItems:{type:Array,default:()=>[]}},setup(l,{emit:c,slots:r}){const O=M(),C=Q(()=>Object.keys(l.formItems).length>0),b=Object.assign({labelPosition:"right",labelWidth:"120px",disabled:!1,size:void 0,"scroll-to-error":!0},l.formOptions),V={gutter:16,type:"flex",align:"middle",...l.rowOptions},y=e=>{const a={},o=t=>{let d="";return U(t.value)?X.includes(t.type)?d=[]:d="":d=t.value,d};return l.formItems.forEach(t=>{t.prop&&(a[t.prop]=o(t))}),{...a,...l.modelValue}},i=m(),F=m({}),s=m(y()),k=e=>e?K[e]:!1;D(()=>s,e=>{c("update:modelValue",e)},{deep:!0,immediate:!1}),B(()=>{P(),c("update:modelValue",s.value)});const P=async()=>{await L();const e={...i.value,...O,initFormModel:y};c("update:api",e)},j=async()=>{var e;await((e=i.value)==null?void 0:e.validate((a,o)=>{c("submit",{valid:a,fields:o,form:s.value,api:l.api})}))},I=()=>{var e;(e=i.value)==null||e.resetFields(),c("reset")},A=e=>{const a={};return e.labelRender&&(a.label=o=>S(o,e)),a},S=(e,a)=>a.labelRender(e),w=(e,a)=>{s.value[a]=e,c("change",{value:e,props:l}),c("update:modelValue",s.value)},T=e=>{let a;const o=["el-input","el-textarea","el-input-number","el-autocomplete"],t=["el-select","el-select-v2","el-tree-select","el-cascader","el-time-select","el-date-picker"];return o.includes(e.type)?a="请输入"+e.label:t.includes(e.type)?a="请选择"+e.label:a="请填写"+e.label,a},R=e=>{const a=e.attrs??{};return{placeholder:T(e),...a}},E=()=>{const e=l.formItems.length;return+l.colCount>e?24/(e<4?4:e):24/+l.colCount};return()=>{let e;return C.value&&u(n("el-form"),g({ref:i,class:"proForm",model:s.value,rules:F.value},b),{default:()=>{var a,o;return[b.inline?u(z,null,null):u(n("el-row"),V,J(e=l.formItems.map((t,d)=>{var h;return G(u(n("el-col"),g({key:t.prop},{...t.col,span:((h=t.col)==null?void 0:h.span)??E()}),{default:()=>[u(n("el-form-item"),t,{default:()=>{var v;return[t.type==="el-text"?u(n("el-text"),t.attrs,{default:()=>[t.value]}):t.type==="slot"?(v=r[t.slotName])==null?void 0:v.call(r,t||{}):_(n(t.type),{...R(t),modelValue:s.value[t.prop],"onUpdate:modelValue":f=>w(f,t.prop)},t.options?()=>{var f;return(f=t.options)==null?void 0:f.map(p=>_(n(p.optionsType||k(t.type)),{...p,key:t.label},{default:()=>p.text}))}:null)]},...A(t)})]}),[[W,l.isQuery?l.expand||d<l.colCount:!0]])}))?e:{default:()=>[e]}),(a=r.actions)!=null&&a.call(r)?(o=r.actions)==null?void 0:o.call(r,{form:s.value}):l.showActions?u(n("el-form-item"),null,{default:()=>[u(n("el-button"),{type:"primary",onClick:j},{default:()=>[x("提 交")]}),u(n("el-button"),{onClick:I},{default:()=>[x("重 置")]})]}):null]}})}}});const te=q(Y,[["__scopeId","data-v-104284e9"]]);export{te as P};
