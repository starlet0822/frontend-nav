import{d as g,Y as C,a as V,b as s,X as y,j as k,f as a,w as o,e as E,u,Z as F,g as J,R as O,h as d,$ as i}from"./index-a931802d.js";const R=d("div",{class:"card-header"},[d("span",{class:"font-medium"}," JSON 读取回显 ")],-1),S=d("div",{class:"el-upload__tip"},"仅支持上传 json 文件",-1),_=".json",T=g({name:"JsonReader",__name:"json-reader",setup(B){const{isDark:f}=C(),l=V("{}"),p=t=>{const e=t.name,r=e.lastIndexOf(".");if(r===-1)return i.error("文件格式不正确!"),!1;const n=e.substring(r+1);return _.includes(n)?!0:(i.error("文件格式不正确!"),!1)},m=t=>{l.value="{}"},v=t=>new Promise((e,r)=>{const n=new FileReader;n.onload=()=>{const c=n.result;e(c)},n.readAsText(t)}),w=async t=>{const e=await v(t.file);l.value=e};return(t,e)=>{const r=s("el-button"),n=s("el-upload"),c=s("el-col"),h=s("CodeEditor"),j=s("el-row"),x=s("el-card"),N=y("copy");return E(),k("div",null,[a(x,{shadow:"never"},{header:o(()=>[R]),default:o(()=>[a(j,null,{default:o(()=>[a(c,null,{default:o(()=>[a(n,{accept:_,"before-upload":p,"http-request":w,action:"/",limit:1,multiple:!1,"on-remove":m},{tip:o(()=>[S]),default:o(()=>[a(r,{type:"primary",icon:u(F)},{default:o(()=>[J(" 上传 JSON 文件 ")]),_:1},8,["icon"])]),_:1})]),_:1}),a(c,null,{default:o(()=>[O(a(h,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=b=>l.value=b),language:"json",showTools:!1,mode:u(f)?"dark":"default"},null,8,["modelValue","mode"]),[[N,l.value]])]),_:1})]),_:1})]),_:1})])}}});export{T as default};
