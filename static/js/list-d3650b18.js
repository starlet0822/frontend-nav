import{Q as F}from"./index-84075ad7.js";import{P as N,g as R,a as $}from"./constants-9e32c685.js";import{d as q}from"./default-2af36baf.js";import{o as A}from"./omit-357edc56.js";import{s as H}from"./shuffle-3e57cce4.js";import{d as M,a as x,r as U,n as k,b as n,Y as W,j as u,f as s,w as m,e as c,h as a,S as Y,H as G,I as J,u as B,v as C,g as K,c as T,B as S,z as X,A as Z,_ as ee}from"./index-1dfbcfb5.js";import"./index-82d36933.js";import"./question-filled-00b6e9f5.js";const te=(e="el-option",p={})=>{const v=[];return Object.keys(p).forEach((o,l)=>{const t={optionsType:e,prop:`${e.replace("el-","")}${l+1}`,text:p[o]};["el-radio","el-radio-button","el-checkbox"].includes(e)&&(t.label=o),["el-option"].includes(e)&&(t.value=o,t.label=p[o]),v.push(t)}),v},z=e=>(X("data-v-27d7cb97"),e=e(),Z(),e),le={class:"list-wrapper overflow-auto",style:{height:"500px"}},se=["infinite-scroll-disabled"],ae={class:"flex items-start"},oe={class:"name flex-1"},ne={key:1,class:"el-loading-spinner flex-center",style:{position:"unset","margin-top":"10px"}},ce=z(()=>a("svg",{class:"circular",viewBox:"0 0 50 50"},[a("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})],-1)),ie=z(()=>a("div",{class:"text-gray-400"},"loading...",-1)),re=[ce,ie],ue={key:2,class:"mt-2 text-sm text-gray-400 text-center"},pe=M({name:"InfiniteScrollList",__name:"list",setup(e){const p={labelPosition:"right",labelWidth:"80px",labelSuffix:":"},v=[{type:"el-input",prop:"name",label:"名称",value:"",attrs:{clearable:!0},col:{xs:24,sm:24,md:12,lg:8,xl:6}},{type:"el-select",prop:"type",label:"类型",value:"",attrs:{class:"w-full"},options:te("el-option",N),col:{xs:24,sm:24,md:12,lg:8,xl:6}}],o=x([]),l=x([]),t=x({}),d=U({pageNo:1,pageSize:20,total:0}),i=x(!1),y=k(()=>o.value.length>=d.total),L=k(()=>i.value||y.value),P=()=>{V()},O=f=>{t.value=f,d.pageNo=1,l.value=[],P()},V=async()=>{try{i.value=!0;const f=A({...d,...t.value},["total"]),{success:g,data:{rows:h,total:b}={}}=await R(f);if(g){d.total=b??0,y.value||(d.pageNo+=1);let _=[];Object.values($).forEach(w=>{_=_.concat(h.filter(I=>I.type===w))}),l.value=l.value.concat(H(_)),o.value=l.value}}finally{i.value=!1}};return V(),(f,g)=>{const h=n("el-card"),b=n("el-avatar"),_=n("el-tag"),w=n("el-statistic"),I=n("el-empty"),j=n("el-col"),D=n("el-row"),E=W("infinite-scroll");return c(),u("div",null,[s(h,{shadow:"never"},{default:m(()=>[s(F,{modelValue:t.value,"onUpdate:modelValue":g[0]||(g[0]=r=>t.value=r),formItems:v,formOptions:p,colCount:"4",isQuery:"",onSearch:O},null,8,["modelValue"])]),_:1}),s(h,{shadow:"never"},{default:m(()=>[s(D,null,{default:m(()=>[s(j,{span:24},{default:m(()=>[a("div",le,[Y((c(),u("ul",{"infinite-scroll-disabled":L.value},[(c(!0),u(G,null,J(l.value,(r,Q)=>(c(),u("li",{key:r.name+Q,class:"list-item p-5 el-border"},[a("div",ae,[a("div",null,[s(b,{shape:"square",size:"large",src:B(q),style:{width:"50px",height:"50px",opacity:.5,marginRight:"16px"}},null,8,["src"])]),a("div",oe,[a("p",null,C(r.name),1),s(_,null,{default:m(()=>[K(C(B(N)[r.type]),1)]),_:2},1024)]),s(w,{title:"权重",value:r.priority},null,8,["value"])])]))),128))],8,se)),[[E,P]]),!i.value&&!l.value.length?(c(),T(I,{key:0,"image-size":200})):S("",!0),i.value?(c(),u("div",ne,re)):S("",!0),!i.value&&y.value?(c(),u("p",ue," 没有更多了~ ")):S("",!0)])]),_:1})]),_:1})]),_:1})])}}});const ye=ee(pe,[["__scopeId","data-v-27d7cb97"]]);export{ye as default};
