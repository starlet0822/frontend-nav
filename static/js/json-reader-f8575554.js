import{d as g,Z as C,a as V,b as s,Y as y,j as S,f as n,w as o,e as k,u,$ as E,g as F,S as J,h as d,a0 as i}from"./index-868c7576.js";const O=d("div",{class:"card-header"},[d("span",{class:"font-medium"}," JSON 读取回显 ")],-1),B=d("div",{class:"el-upload__tip"},"仅支持上传 json 文件",-1),_=".json",T=g({name:"JsonReader",__name:"json-reader",setup(D){const{isDark:f}=C(),l=V("{}"),p=t=>{const e=t.name,r=e.lastIndexOf(".");if(r===-1)return i.error("文件格式不正确!"),!1;const a=e.substring(r+1);return _.includes(a)?!0:(i.error("文件格式不正确!"),!1)},m=t=>{l.value="{}"},v=t=>new Promise((e,r)=>{const a=new FileReader;a.onload=()=>{const c=a.result;e(c)},a.readAsText(t)}),w=async t=>{const e=await v(t.file);l.value=e};return(t,e)=>{const r=s("el-button"),a=s("el-upload"),c=s("el-col"),h=s("CodeEditor"),j=s("el-row"),x=s("el-card"),N=y("copy");return k(),S("div",null,[n(x,{shadow:"never"},{header:o(()=>[O]),default:o(()=>[n(j,null,{default:o(()=>[n(c,null,{default:o(()=>[n(a,{accept:_,"before-upload":p,"http-request":w,action:"/",limit:1,multiple:!1,"on-remove":m},{tip:o(()=>[B]),default:o(()=>[n(r,{type:"primary",icon:u(E)},{default:o(()=>[F(" 上传 JSON 文件 ")]),_:1},8,["icon"])]),_:1})]),_:1}),n(c,null,{default:o(()=>[J(n(h,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=b=>l.value=b),language:"json",showTools:!1,mode:u(f)?"dark":"default"},null,8,["modelValue","mode"]),[[N,l.value]])]),_:1})]),_:1})]),_:1})])}}});export{T as default};
